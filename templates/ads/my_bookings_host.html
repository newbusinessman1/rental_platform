{% extends "base.html" %}
{% block content %}
<div class="max-w-6xl mx-auto py-10">
  <h1 class="text-3xl font-bold mb-6">Брони по моим объявлениям</h1>

  {% if messages %}
    <div class="space-y-2 mb-6">
      {% for m in messages %}
        <div class="p-3 rounded {{ m.tags|default:'bg-gray-100' }}">
          {{ m }}
        </div>
      {% endfor %}
    </div>
  {% endif %}

  {% if bookings %}
    <div class="space-y-4">
      {% for b in bookings %}
        <div class="bg-white border rounded-lg p-4 flex items-center justify-between">
          <div>
            <div class="text-lg font-semibold">{{ b.listing.title }}</div>
            <div class="text-sm text-gray-600">
              Гость: {{ b.user_email|default:"—" }} •
              Даты: {{ b.start_date }} → {{ b.end_date }} •
              Статус: <span class="font-medium">{{ b.status }}</span>
            </div>
          </div>
          <div class="flex items-center gap-3">
            <form method="post" action="{% url 'ads:booking_approve' b.id %}">
              {% csrf_token %}
              <button class="bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700">Подтвердить</button>
            </form>
            <form method="post" action="{% url 'ads:booking_decline' b.id %}">
              {% csrf_token %}
              <button class="bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700">Отклонить</button>
            </form>
          </div>
        </div>
      {% endfor %}
    </div>
  {% else %}
    <p class="text-gray-600">Пока нет заявок.</p>
  {% endif %}
</div>
{% endblock %}